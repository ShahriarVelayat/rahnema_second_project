---
- name: Ansible shell module multiple commands
  shell: "curl -fsSL https://deb.nodesource.com/setup_10.x | sudo -E bash -"
- name: Install reqired packages
  apt: name={{ item }} state=present
  with_items:
    - git
    - curl
    - wget
    - nodejs

- name: clone node result app
  ansible.builtin.git:
    repo: "https://hamgit.ir/shahriarvelayat/result.git"
    dest: /home/ubuntu/result
    clone: yes

- name: install nodejs requirments
  community.general.npm:
    path: /home/ubuntu/result

- name: copy result service
  ansible.builtin.copy:
    src: ../templates/result.service
    dest: /etc/systemd/system/result.service
    force: yes
  notify:
    - Restart result-app
    - Enable result-app
